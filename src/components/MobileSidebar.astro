---
import Logo from "./Logo.astro";
import NavbarOption from "./NavbarOption.astro";
import ThemeSwitcher from "./ThemeSwitcher.astro";
---

<div id="mobile-sidebar" class="hidden transition animate-slide-in-from-right z-60 size-full p-6 bg-white dark:bg-neutral-600">
  <button id="close-sidebar-btn" class="absolute right-7 flex justify-center items-center dark:text-neutral-300">
    <i class="ph-bold ph-x text-xl"></i>
  </button>

  <Logo layout="sidebar" />

  <ul id="mobile-sidebar-list" class="flex flex-col font-black uppercase gap-3 mt-6">
    <NavbarOption href="#about">Sobre</NavbarOption>
    <NavbarOption href="#skills">Habilidades</NavbarOption>
    <NavbarOption href="#projects">Projetos</NavbarOption>
    <NavbarOption href="#contact">Contato</NavbarOption>

    <ThemeSwitcher />
  </ul>
</div>

<script is:inline>
  function closeSidebar() {
    mobileSidebar.classList.replace('fixed', 'hidden');
  }

  const closeSidebarBtn = document.getElementById('close-sidebar-btn');
  const mobileSidebarList = document.getElementById('mobile-sidebar-list');

  mobileSidebarList.addEventListener('click', (event) => {
    const link = event.target.closest('a');

    if (!link) return;

    closeSidebar();
  });

  closeSidebarBtn.addEventListener('click', () => {
    closeSidebar();
  });
</script>