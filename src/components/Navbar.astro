---
import Logo from "./Logo.astro";
import NavbarOption from "./NavbarOption.astro";
---

<nav class="sticky top-4 z-50 flex items-center justify-between uppercase font-black border-4 bg-white p-6 brutal-shadow-sm tracking-tight dark:bg-neutral-600 dark:text-neutral-300 dark:border-black">
  <Logo layout="navbar" />

  <ul class="hidden items-center gap-4 md:flex">
    <NavbarOption href="#about">Sobre</NavbarOption>
    <NavbarOption href="#skills">Habilidades</NavbarOption>
    <NavbarOption href="#projects">Projetos</NavbarOption>
    <NavbarOption href="#contact">Contato</NavbarOption>

    <li class="h-4 border"></li>

    <div id="theme-btn" class="relative border-2 bg-white dark:bg-neutral-900 w-16 rounded-full p-1 h-9 rounded-brutal-shadow-sm hover:cursor-pointer">
      <div id="light-mode" class="absolute top-1 left-1 size-6 rounded-full bg-black dark:bg-custom-lime flex items-center justify-center
          transition-transform duration-300 ease-[cubic-bezier(0.68,-0.55,0.265,1.55)] dark:translate-x-7"
      >
        <i class="ph-bold ph-sun absolute text-white transition-opacity duration-200 dark:opacity-0"></i>
        <i class="ph-bold ph-moon absolute opacity-0 transition-opacity duration-200 dark:opacity-100 text-black"></i>
      </div>
    </div>
  </ul>

  <button id="mobile-sidebar-btn" class="block md:hidden">
    <i class="ph-bold ph-list"></i>
  </button>
</nav>

<script is:inline>
  function setTheme(theme) {
    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
      localStorage.setItem('theme', 'dark');

      return;
    }

    document.documentElement.classList.remove('dark');
    localStorage.setItem('theme', 'light');

    return;
  }

  const themeButton = document.getElementById('theme-btn');
  const mobileSidebarButton = document.getElementById('mobile-sidebar-btn');
  const mobileSidebar = document.getElementById('mobile-sidebar');

  themeButton?.addEventListener('click', () => {
    const isDark = document.documentElement.classList.contains('dark');
    setTheme(isDark ? 'light' : 'dark');
  });

  mobileSidebarButton.addEventListener('click', () => {
    mobileSidebar.classList.replace('hidden', 'fixed');
  });
</script>